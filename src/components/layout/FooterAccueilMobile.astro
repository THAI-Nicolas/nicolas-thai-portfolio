---
import CardCV from "../boutons/CardCV.astro";
import MainBouton from "../boutons/MainBouton.astro";
import SmallBouton from "../boutons/SmallBouton.astro";
import MiiDialogue from "../ui/MiiDialogue.astro";
import FondBouton from "../../assets/icones/bouton_fond.svg";
import FondFooterMobile from "../../assets/icones/footer_fond_mobile.svg";
---

<footer class="footer-wii-mobile fixed left-0 right-0 w-full h-[28rem] md:h-[clamp(24rem,50vw,26rem)] overflow-visible bottom-[-7.5rem] md:bottom-[clamp(-4rem,-8vw,-9rem)] z-10">
  <!-- Fond mobile -->
  <div class="absolute left-1/2 -translate-x-1/2 top-0 bottom-0 w-[130%] md:w-[105%] h-full z-0">
    <FondFooterMobile class="w-full h-full object-fill footer-svg-mobile" />
  </div>

  <!-- Fond bouton gauche -->
  <div class="absolute  left-[-1.5rem] md:left-[clamp(-0.625rem,-1.5vw,0rem)] bottom-[12.5rem] md:bottom-[clamp(11rem,24vw,12rem)] w-[6rem] md:w-[clamp(6rem,24vw,18rem)] h-[9rem] md:h-[clamp(7rem,22vw,22rem)] z-10">
    <FondBouton class="w-full h-full object-cover footer-svg-mobile" />
  </div>

  <!-- Fond bouton droite -->
  <div class="absolute bottom-[12.5rem] md:bottom-[clamp(11rem,24vw,12rem)] w-[6rem] md:w-[clamp(6rem,24vw,18rem)] right-[-1.5rem] md:right-[-1rem] h-[9rem] md:h-[clamp(7rem,22vw,22rem)] z-10">
    <FondBouton class="w-full h-full object-cover scale-x-[-1] footer-svg-mobile" />
  </div>

  <!-- MainBouton Mii à gauche -->
  <div class="absolute left-[1.25rem] md:left-[clamp(2rem,7vw,8rem)] top-[11rem] md:top-[clamp(5rem,14vw,7.5rem)] -translate-y-1/2 z-20 test-footer-color scale-[0.85] md:scale-100">
    <MainBouton type="presentation" size="mobile" />
  </div>

  <!-- MainBouton Enveloppe à droite -->
  <div class="absolute right-[1.25rem] md:right-[clamp(2.75rem,9vw,8rem)] top-[11rem] md:top-[clamp(5rem,14vw,7.5rem)] -translate-y-1/2 z-20 test-footer-color scale-[0.85] md:scale-100">
    <MainBouton type="contact" size="mobile" />
  </div>

  <!-- CardCV à droite du MainBouton Mii -->
  <div class="absolute left-[clamp(8.5rem,21vw,14.5rem)] top-[16rem] md:top-[clamp(13rem,30vw,17.5rem)] -translate-y-1/2 z-20 test-footer-color">
    <CardCV size="mobile" />
  </div>

  <!-- SmallBouton Paramètres à gauche du MainBouton Enveloppe -->
  <div class="absolute right-[clamp(8.5rem,21vw,14.5rem)] top-[16rem] md:top-[clamp(13rem,30vw,17.5rem)] -translate-y-1/2 z-20 test-footer-color">
    <SmallBouton type="parametres" size="mobile" /> 
  </div>

  <!-- Portfolio et Nom au centre -->
  <div class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-20 text-center">
    <!-- Portfolio -->
    <div class="text-[1.5rem] md:text-[clamp(1rem,9.4vw,2.5rem)] font-bold text-light-blue uppercase tracking-wider relative bottom-[clamp(5rem,10vw,6rem)]">
      Portfolio
    </div>

    <!-- Nom -->
    <div class="hidden md:block text-[clamp(0.875rem,6.25vw,1.75rem)] text-text-gray font-semibold relative bottom-[clamp(1.5rem,3.75vw,2.5rem)]">
      Nicolas THAI
    </div>
  </div>
</footer>

<!-- Dialogue Mii positionné en dehors du footer mobile pour éviter le overflow -->
<div class="hidden md:hidden absolute left-[clamp(1rem,2.5vw,1.5rem)] bottom-[clamp(12.5rem,31vw,15.625rem)] z-30" style="width: 155px;">
  <MiiDialogue />
</div>

<style>
  /* Test de couleur footer sur les boutons de l'accueil mobile uniquement */
  .test-footer-color :deep(.wii-main-button__circle::after),
  .test-footer-color :deep(.wii-button__circle),
  .test-footer-color :deep(.card-cv) {
    --color-light-blue: #34beed;
  }
  
  .test-footer-color :deep(.wii-main-button__circle::after) {
    box-shadow:
      0 0 3px rgba(52, 190, 237, 0.5),
      0 0 6px rgba(52, 190, 237, 0.4) !important;
  }
  
  .test-footer-color :deep(button:hover .wii-main-button__circle) {
    box-shadow:
      inset -4px -4px 9.5px rgba(0, 0, 0, 0.26),
      5.8px 8.7px 0px rgba(186, 188, 193, 1),
      0 0 6px rgba(52, 190, 237, 0.3),
      0 0 12px rgba(52, 190, 237, 0.3) !important;
  }
  
  .test-footer-color :deep(.wii-button__circle) {
    border-color: rgba(52, 190, 237, 0.5);
    box-shadow:
      inset 0 5px 5px rgba(0, 0, 0, 0.25),
      0 5px 5px rgba(0, 0, 0, 0.25),
      0 0 2px rgba(52, 190, 237, 0.3),
      0 0 4px rgba(52, 190, 237, 0.3) !important;
  }
  
  .test-footer-color :deep(button:hover .wii-button__circle) {
    background-color: #34beed;
    border-color: #34beed;
    box-shadow:
      inset 0 5px 5px rgba(0, 0, 0, 0.25),
      0 5px 5px rgba(0, 0, 0, 0.25),
      0 0 6px rgba(52, 190, 237, 0.3),
      0 0 12px rgba(52, 190, 237, 0.3) !important;
  }
  
  .test-footer-color :deep(.animate-cv-glow) {
    animation: cv-glow-footer 2.5s ease-in-out infinite;
  }
  
  @keyframes cv-glow-footer {
    0%, 100% {
      filter: drop-shadow(0 0 2px rgba(52, 190, 237, 0.3));
    }
    50% {
      filter: drop-shadow(0 0 5px rgba(52, 190, 237, 0.3)) drop-shadow(0 0 8px rgba(52, 190, 237, 0.3));
    }
  }
  
  /* Animation spécifique pour MainBouton avec plus d'intensité */
  .test-footer-color :deep(@keyframes button-glow-pulse) {
    0%, 100% {
      box-shadow:
        0 0 3px rgba(52, 190, 237, 0.5),
        0 0 6px rgba(52, 190, 237, 0.4);
    }
    50% {
      box-shadow:
        0 0 6px rgba(52, 190, 237, 0.7),
        0 0 12px rgba(52, 190, 237, 0.5);
    }
  }
</style>


