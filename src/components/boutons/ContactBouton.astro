---
import IconEnveloppe from "../../assets/icones/enveloppe.svg";
import IconGithub from "../../assets/icones/github.svg";
import IconLinkedin from "../../assets/icones/linkedin.svg";
import IconInstagram from "../../assets/icones/instagram.svg";

export interface Props {
  type: "email" | "github" | "linkedin" | "instagram";
  href?: string;
  onClick?: () => void;
}

const { type, href = "#", onClick } = Astro.props;

const icons = {
  email: IconEnveloppe,
  github: IconGithub,
  linkedin: IconLinkedin,
  instagram: IconInstagram,
};

const IconComponent = icons[type];
---

<button
  class="relative cursor-pointer transition-transform duration-200 ease-in-out border-none bg-none p-0 w-20 h-20 md:w-24 md:h-24 lg:w-26 lg:h-26 hover:scale-105 flex items-center justify-center"
  data-type={type}
  data-onclick={onClick ? "true" : undefined}
>
  <div
    class="w-full h-full rounded-2xl relative overflow-hidden flex items-center justify-center wii-contact-button__container"
  >
    {/* Icônes */}
    {
      type === "email" && (
        <IconEnveloppe class="w-8 h-8 md:w-10 md:h-10 lg:w-13 lg:h-13 wii-contact-button__icon" />
      )
    }
    {
      type === "github" && (
        <IconGithub class="w-8 h-8 md:w-10 md:h-10 lg:w-13 lg:h-13 wii-contact-button__icon" />
      )
    }
    {
      type === "linkedin" && (
        <IconLinkedin class="w-8 h-8 md:w-10 md:h-10 lg:w-13 lg:h-13 wii-contact-button__icon" />
      )
    }
    {
      type === "instagram" && (
        <IconInstagram class="w-8 h-8 md:w-10 md:h-10 lg:w-13 lg:h-13 wii-contact-button__icon" />
      )
    }
  </div>
</button>

<style>
  /* Focus ring supprimé */
  button:focus {
    outline: none;
    box-shadow: none;
  }

  .wii-contact-button__container {
    /* État normal */
    background-color: var(--color-background);
    border: 4px solid var(--color-light-blue);
    border-radius: 17px;
    background-clip: padding-box;
    position: relative;

    /* Ombres du Figma */
    box-shadow:
      6px 4px 8px rgba(52, 190, 237, 0.1),
      0 8px 8px rgba(0, 0, 0, 0.25);
  }

  .wii-contact-button__icon {
    color: var(--color-light-blue);
    fill: var(--color-light-blue);
    stroke: none;
    filter: drop-shadow(0 2px 2px rgba(29, 29, 29, 0.25));
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const buttons = document.querySelectorAll('button[data-onclick="true"]');

    buttons.forEach((button) => {
      button.addEventListener("click", (e) => {
        const type = button.getAttribute("data-type");

        switch (type) {
          case "email":
            console.log("Email cliqué");
            break;
          case "github":
            console.log("GitHub cliqué");
            break;
          case "linkedin":
            console.log("LinkedIn cliqué");
            break;
          case "instagram":
            console.log("Instagram cliqué");
            break;
        }
      });
    });
  });
</script>
