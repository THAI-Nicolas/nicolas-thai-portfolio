---
import IconEnveloppe from "../../assets/icones/enveloppe.svg";
import IconGithub from "../../assets/icones/github.svg";
import IconLinkedin from "../../assets/icones/linkedin.svg";
import IconInstagram from "../../assets/icones/instagram.svg";

export interface Props {
  type: "email" | "github" | "linkedin" | "instagram";
  href?: string;
  onClick?: () => void;
}

const { type, href, onClick } = Astro.props;

// Génération automatique des liens selon le type
const defaultLinks = {
  email: "mailto:thainicolas06@gmail.com",
  github: "https://github.com/THAI-Nicolas",
  linkedin: "https://www.linkedin.com/in/nicolas-thai-21539a294/",
  instagram: "https://www.instagram.com/nicowh6/",
};

const finalHref = href || defaultLinks[type];

const icons = {
  email: IconEnveloppe,
  github: IconGithub,
  linkedin: IconLinkedin,
  instagram: IconInstagram,
};

const IconComponent = icons[type];
---

<a
  href={finalHref}
  target={type !== "email" ? "_blank" : undefined}
  rel={type !== "email" ? "noopener noreferrer" : undefined}
  class="relative cursor-pointer transition-transform duration-200 ease-in-out border-none bg-none p-0 w-20 h-20 md:w-24 md:h-24 lg:w-26 lg:h-26 hover:scale-105 flex items-center justify-center"
  data-type={type}
>
  <div
    class="w-full h-full rounded-2xl relative overflow-hidden flex items-center justify-center wii-contact-button__container"
    style="pointer-events: none;"
  >
    {/* Icônes */}
    {
      type === "email" && (
        <IconEnveloppe class="w-8 h-8 md:w-10 md:h-10 lg:w-13 lg:h-13 wii-contact-button__icon" />
      )
    }
    {
      type === "github" && (
        <IconGithub class="w-8 h-8 md:w-10 md:h-10 lg:w-13 lg:h-13 wii-contact-button__icon" />
      )
    }
    {
      type === "linkedin" && (
        <IconLinkedin class="w-8 h-8 md:w-10 md:h-10 lg:w-13 lg:h-13 wii-contact-button__icon" />
      )
    }
    {
      type === "instagram" && (
        <IconInstagram class="w-8 h-8 md:w-10 md:h-10 lg:w-13 lg:h-13 wii-contact-button__icon" />
      )
    }
  </div>
</a>

<style>
  /* Focus ring supprimé */
  a:focus {
    outline: none;
    box-shadow: none;
  }

  .wii-contact-button__container {
    /* État normal */
    background-color: var(--color-background);
    border: 4px solid var(--color-light-blue);
    border-radius: 17px;
    background-clip: padding-box;
    position: relative;

    /* Ombres + effet néon ultra léger permanent */
    box-shadow:
      6px 4px 8px rgba(52, 190, 237, 0.1),
      0 8px 8px rgba(0, 0, 0, 0.25),
      0 0 2px rgba(52, 190, 237, 0.6),
      0 0 4px rgba(52, 190, 237, 0.5);
    
    transition: box-shadow 0.3s ease-out;
    animation: button-glow-pulse 3s ease-in-out infinite;
  }

  /* Effet néon au hover */
  a:hover .wii-contact-button__container {
    box-shadow:
      6px 4px 8px rgba(52, 190, 237, 0.1),
      0 8px 8px rgba(0, 0, 0, 0.25),
      0 0 8px var(--color-light-blue),
      0 0 12px var(--color-light-blue);
    animation: none;
  }

  /* Animation de pulsation subtile */
  @keyframes button-glow-pulse {
    0%, 100% {
      box-shadow:
        6px 4px 8px rgba(52, 190, 237, 0.1),
        0 8px 8px rgba(0, 0, 0, 0.25),
        0 0 2px rgba(52, 190, 237, 0.6),
        0 0 4px rgba(52, 190, 237, 0.5);
    }
    50% {
      box-shadow:
        6px 4px 8px rgba(52, 190, 237, 0.1),
        0 8px 8px rgba(0, 0, 0, 0.25),
        0 0 4px rgba(52, 190, 237, 0.7),
        0 0 8px rgba(52, 190, 237, 0.6);
    }
  }

  .wii-contact-button__icon {
    color: var(--color-light-blue);
    fill: var(--color-light-blue);
    stroke: none;
    filter: drop-shadow(0 2px 2px rgba(29, 29, 29, 0.25));
  }
</style>
