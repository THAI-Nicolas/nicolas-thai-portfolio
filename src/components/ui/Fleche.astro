---
import FlecheIcon from "../../assets/icones/fleche.svg";

export interface Props {
  size?: "mobile" | "desktop";
  direction?: "droite" | "gauche" | "haut" | "bas";
  href?: string;
  onClick?: () => void;
  colorGradient?: { from: string; to: string };
}

const {
  size = "mobile",
  direction = "droite",
  href = "#",
  onClick,
  colorGradient,
} = Astro.props;

// Tailles dynamiques
const sizes = {
  mobile: {
    container: "w-[33px] h-[63px]",
  },
  desktop: {
    container: "w-[58px] h-[111px]",
  },
};

const currentSize = sizes[size] || sizes.desktop;
---

<div class={`${currentSize.container} relative`}>
  <a
    href={href}
    class="fleche cursor-pointer transition-all duration-200 hover:scale-110 block origin-center absolute inset-0"
    data-onclick={onClick ? "true" : undefined}
  >
    <FlecheIcon
      class={`w-full h-full fleche-svg ${direction === "gauche" ? "rotate-180" : direction === "haut" ? "-rotate-90" : direction === "bas" ? "rotate-90" : ""} ${colorGradient ? "colored-arrow" : ""}`}
    />
  </a>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const fleche = document.querySelector("a[data-onclick='true']");
    if (fleche) {
      fleche.addEventListener("click", () => {
        console.log("Fleche cliqu√©e");
      });
    }
  });
</script>

<style>
  .fleche-svg {
    transition: filter 0.3s ease;
  }

  .fleche:hover .fleche-svg {
    filter: drop-shadow(
      0 0 15px color-mix(in srgb, var(--color-light-blue) 80%, transparent)
    );
  }

  [data-theme="dark"] .fleche-svg:not(.colored-arrow) {
    filter: grayscale(100%) brightness(3) invert(1) contrast(0.9) !important;
  }

  [data-theme="dark"] .fleche:hover .fleche-svg:not(.colored-arrow) {
    filter: grayscale(100%) brightness(3.2) invert(1) contrast(0.9)
      drop-shadow(0 0 15px rgba(212, 212, 212, 0.8)) !important;
  }

  .colored-arrow {
    filter: drop-shadow(0 0 3px rgba(0, 0, 0, 0.3))
      drop-shadow(0 0 1px rgba(0, 0, 0, 0.5)) brightness(0) saturate(100%)
      invert(84%) sepia(52%) saturate(464%) hue-rotate(358deg) brightness(104%)
      contrast(99%) !important;
  }
</style>
